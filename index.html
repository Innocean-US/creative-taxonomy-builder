<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Campaign Taxonomy Builder</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      max-width: 900px;
      margin: 2rem auto;
      padding: 0 1rem;
    }
    h1 {
      font-size: 1.6rem;
      margin-bottom: 0.5rem;
    }
    h2 {
      font-size: 1.2rem;
      margin-top: 2rem;
      margin-bottom: 0.5rem;
    }
    .field-group {
      margin-bottom: 1rem;
      display: flex;
      gap: 1rem;
      align-items: center;
      flex-wrap: wrap;
    }
    label {
      min-width: 160px;
      font-weight: 600;
    }
    select {
      min-width: 220px;
      padding: 0.25rem 0.5rem;
    }
    input[type="text"],
    input[type="number"] {
      padding: 0.25rem 0.5rem;
    }
    .code-output {
      margin-top: 2rem;
      padding: 1rem;
      border-radius: 6px;
      border: 1px solid #ccc;
      background: #f9f9f9;
    }
    .code-output code {
      font-size: 1.1rem;
      font-weight: 600;
      word-break: break-all;
    }
    .hint {
      font-size: 0.85rem;
      color: #666;
      margin-top: 0.25rem;
    }
    .offer-wrapper {
      border: 1px solid #ddd;
      border-radius: 6px;
      padding: 1rem;
    }
    .offer-row {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      align-items: center;
    }
    .inline-label {
      font-size: 0.8rem;
      color: #444;
    }
  </style>
</head>
<body>
  <h1>Campaign Taxonomy Builder</h1>
  <p>Select values below. The tool will generate the full taxonomy string.</p>

  <!-- REGION -->
  <div class="field-group">
    <label for="region">Region</label>
    <select id="region">
      <option value="">-- Select Region --</option>
      <option value="ALR">All Regions</option>
      <option value="CEN">Central</option>
      <option value="EAS">East</option>
      <option value="MAT">Mid-Atlantic</option>
      <option value="MTN">Mountain</option>
      <option value="SCR">South Central</option>
      <option value="SOU">South</option>
      <!-- <option value="NAT">National</option> -->
    </select>
  </div>

  <!-- MEDIA TYPE -->
  <div class="field-group">
    <label for="media">Media Type</label>
    <select id="media">
      <option value="">-- Select Channel --</option>
      <option value="NIMV">Broadcast Spots</option>
      <option value="IMV">Programmatic Video</option>
      <option value="DIS">Display</option>
      <option value="MLA">Meta Static Link Ad</option>
      <option value="MMPA">Meta Carousel Ad</option>
      <option value="MVA">Meta Video Ad </option>
      <option value="AUD">Streaming Audio</option>
    </select>
  </div>

  <!-- INITIATIVE / CAMPAIGN -->
  <div class="field-group">
    <label for="initiative">Initiative / Campaign</label>
    <select id="initiative">
      <option value="">-- Select Initiative --</option>
      <option value="25PROMO">2025 Promo Period Creative</option>
      <option value="SPGSE">Spring Getaway Sales Event</option>
      <option value="SGSE">Summer Getaway Sales Event</option>
      <option value="WGSE">Winter Getaway Sales Event</option>
      <option value="WIN">Wins Every Time VS Campaign</option>
      <option value="CUA">Customer Assurance</option>
      <option value="BRD">Brand</option>
      <option value="EVE">Evergreen</option>
      <option value="EVECON">Evergreen Conquest</option>
      <option value="EVERET">Evergreen Retention</option>
    </select>
  </div>

  <!-- TITLE -->
  <div class="field-group">
    <label for="title">Title</label>
    <select id="title">
      <option value="">-- Select Title --</option>
      <option value="NA">Not Applicable</option>
      <option value="LLW">Lay Low</option>
      <option value="CNF">Confession</option>
      <option value="CPT">Couple's Therapy</option>
      <option value="LWF">Lawyer Friend</option>
      <option value="DAD">Dad Santa</option>
      <option value="COP">Mall Cop</option>
      <option value="TOW">The Tow</option>
      <option value="NLBR1">No Looking Back R1</option>
      <option value="WFH">Work From Home</option>
      <option value="DIN">Diner</option>
      <option value="DGL">Dog Life R1</option>
      <option value="WAP">Watch Party</option>
      <option value="SHD">Shade</option>
      <option value="HOM">Home</option>
      <option value="COL">College</option>
      <option value="BYA">Booya</option>
      <option value="SLG">Short Long R2</option>
      <option value="ROC">Rock Out</option>
      <option value="RLF">Real Friends</option>
      <option value="SOF">Stand Off</option>
      <option value="ATM">All That &amp; More</option>
      <option value="TRD">The Road</option>
      <!-- all the VS/feature titles unchanged -->
      <!-- ... keep your full list here (omitted for brevity) ... -->
      <option value="KTT">Kick the Tires</option>
    </select>
  </div>

  <!-- MODEL YEAR -->
  <div class="field-group">
    <label for="model_year">Model Year</label>
    <select id="model_year">
      <option value="">-- Select Model Year --</option>
      <option value="MY24">MY24</option>
      <option value="MY25">MY25</option>
      <option value="MY26">MY26</option>
      <option value="MY27">MY27</option>
      <option value="MY28">MY28</option>
      <option value="MY29">MY29</option>
      <option value="MY30">MY30</option>
    </select>
  </div>

  <!-- MODEL NAME -->
  <div class="field-group">
    <label for="model_name">Model Name</label>
    <select id="model_name">
      <option value="">-- Select Model --</option>
      <option value="AFL">Alternative Fuel</option>
      <option value="ELA">Elantra ICE</option>
      <option value="EHV">Elantra HEV</option>
      <option value="ELN">Elantra N</option>
      <option value="EGT">Elantra GT</option>
      <option value="IO5">Ioniq 5</option>
      <option value="ION">Ioniq 5 N</option>
      <option value="IO6">Ioniq 6</option>
      <option value="IO9">Ioniq 9</option>
      <option value="KON">Kona ICE</option>
      <option value="KEV">Kona EV</option>
      <option value="NEX">Nexo</option>
      <option value="PAL">Palisade ICE</option>
      <option value="PHE">Palisade HEV</option>
      <option value="SCZ">Santa Cruz</option>
      <option value="SFN">Santa Fe ICE</option>
      <option value="SHV">Santa Fe HEV</option>
      <option value="SON">Sonata</option>
      <option value="HYB">Sonata HEV</option>
      <option value="TUC">Tucson ICE</option>
      <option value="THV">Tucson HEV</option>
      <option value="TPV">Tucson PHEV</option>
      <option value="VEN">Venue</option>
      <option value="MLM">Multiple Models</option>
    </select>
  </div>

  <!-- OFFER BUILDER (TEMPLATE-BASED) -->
  <h2>Offer Builder</h2>
  <div class="offer-wrapper">
    <div class="offer-row">
      <span class="inline-label"><strong>Offer template</strong></span>
      <select id="offerTemplate">
        <option value="">-- Select Offer Name --</option>
        <!-- Cash only -->
        <option value="BC">Bonus Cash = 2.5BC</option>
        <option value="DC">Dealer Cash = 2.5DC</option>
        <option value="SEC">Sales Event Cash = 2.5SEC</option>
        <option value="TS_CI">Total Savings + Charger + Installation = 2.5TS+CI</option>
        <option value="TS">Total Savings = 2.5TS</option>

        <!-- APR basic -->
        <option value="APR_ONLY">APR = 3.99APR72</option>
        <option value="ZERO_ZERO">0-0 (0.00% APR) = 0APR60</option>

        <!-- APR + Cash relationships -->
        <option value="APR_PLUS_BC">APR + BC = 2.99APR60+2.5BC</option>
        <option value="APR_OR_BC">APR or BC = 2.99APR60|2.5BC</option>

        <!-- APR + 0P + Cash/UP Cash -->
        <option value="APR_PLUS_0P">APR + 0 Payments = 0APR60+0P90</option>
        <option value="APR_PLUS_0P_BC">APR + 0P + BC = 0APR60+0P90+0.5BC</option>
        <option value="APR_PLUS_0P_UPBC">APR + 0P + UP BC = 0APR60+0P90+UP2.5BC</option>
        <option value="APR_0P_OR_UPBC">APR + 0P or UP BC = 0APR60+0P90|UP2.5BC</option>

        <!-- APR with CI / BC + CI -->
        <option value="APR_PLUS_CI">APR + CI = 3.99APR72+CI</option>
        <option value="APR_BC_CI">APR + BC + CI = 3.99APR72+0.5BC+CI</option>

        <!-- Lease + cash combos -->
        <option value="LEASE_ONLY">Lease = L239</option>
        <option value="LEASE_BC">Lease + BC = L249+1.5BC</option>
        <option value="LEASE_EVBC">Lease + EVBC = L229+7.5EVBC</option>
        <option value="LEASE_EVBC_CI">Lease + EVBC + CI = L229+7.5EVBC+CI</option>
        <option value="SD000">Lease SD000 = SD000</option>

        <!-- APR + Lease / APR or Lease -->
        <option value="APR_PLUS_LEASE">APR + Lease = 1.99APR48+L239</option>
        <option value="APR_OR_LEASE">APR or Lease = 1.99APR48|L239</option>

        <!-- APR or APR; APR or EVBC -->
        <option value="APR_OR_APR">APR or APR = 2.99APR60|1.99APR48</option>
        <option value="APR_OR_EVBC">APR or EVBC = 0.99APR60|7.5EVBC</option>
      </select>
    </div>

    <div class="offer-row" style="margin-top:0.5rem;">
      <span class="inline-label">APR 1</span>
      <input id="offerAprRate" type="text" placeholder="APR % (e.g. 2.99)" />
      <input id="offerAprMonths" type="text" placeholder="Months (e.g. 60)" />
      <span class="inline-label">APR 2</span>
      <input id="offerAprRate2" type="text" placeholder="2nd APR % (e.g. 1.99)" />
      <input id="offerAprMonths2" type="text" placeholder="2nd Months (e.g. 48)" />
    </div>

    <div class="offer-row" style="margin-top:0.5rem;">
      <span class="inline-label">Lease</span>
      <input id="offerLeaseAmount" type="text" placeholder="Lease $ (e.g. 239)" />
      <span class="inline-label">Cash</span>
      <input id="offerCashAmount" type="text" placeholder="$ Cash (e.g. 2,500 or 7,500)" />
      <label class="inline-label">
        <input type="checkbox" id="offerCashUp" /> UP to
      </label>
      <span class="inline-label">0 Payments</span>
      <input id="offerPayDays" type="text" placeholder="Days (e.g. 90)" />
    </div>

    <div class="offer-row" style="margin-top:0.5rem;">
      <span class="inline-label"><strong>Offer Code</strong></span>
      <input id="offerCodeDisplay" type="text" placeholder="e.g. 2.99APR60|2.5BC" readonly style="min-width:260px;" />
      <input type="hidden" id="offerCode" />
    </div>

    <div class="hint" style="margin-top:0.5rem;">
      Enter only the fields needed for the selected template.  
      Examples this can generate:  
      2.5BC, 2.5DC, 2.5SEC, 2.5TS+CI, 2.5TS, 3.99APR72, 0APR60+0P90,  
      2.99APR60+2.5BC, 2.99APR60|2.5BC, 0APR60+0P90+0.5BC, 0APR60+0P90+UP2.5BC,  
      0APR60+0P90|UP2.5BC, 3.99APR72+CI, 3.99APR72+0.5BC+CI, L239, L249+1.5BC, SD000,  
      L229+7.5EVBC, L229+7.5EVBC+CI, 1.99APR48+L239, 1.99APR48|L239, 3.99APR72+0P90,  
      2.99APR60|1.99APR48, 0.99APR60|7.5EVBC.
    </div>
  </div>

  <!-- MARKET -->
  <div class="field-group">
    <label for="market">Market / DMA</label>
    <select id="market">
      <option value="">-- Select Market --</option>
      <option value="ATL">Atlanta</option>
      <option value="LAX">Los Angeles</option>
      <option value="NYC">New York</option>
      <option value="NA">National</option>
    </select>
  </div>

  <!-- AGENCY -->
  <div class="field-group">
    <label for="agency">Agency / Partner</label>
    <select id="agency">
      <option value="">-- Select Agency --</option>
      <option value="GM">General Market Agency</option>
      <option value="HM">Hyundai In-house</option>
      <option value="PM">Performance Media Partner</option>
    </select>
  </div>

  <!-- RESERVED / SUFFIX -->
  <div class="field-group">
    <label for="reserved">Reserved / Suffix</label>
    <select id="reserved">
      <option value="">-- Select Suffix --</option>
      <option value="NA">Not Applicable</option>
      <option value="A">Version A</option>
      <option value="B">Version B</option>
    </select>
  </div>

  <!-- OUTPUT -->
  <div class="code-output">
    <div><strong>Generated Taxonomy String:</strong></div>
    <code id="taxonomyCode">(select values above)</code>
    <div class="hint">
      This updates live as you change fields. Copy + paste into your trafficking sheet.
    </div>
  </div>

  <script>
    // Order of fields in final taxonomy string
    const fieldOrder = [
      "region",
      "media",
      "initiative",
      "title",
      "model_year",
      "model_name",
      "offerCode",
      "market",
      "agency",
      "reserved"
    ];

    function updateTaxonomy() {
      const parts = fieldOrder
        .map(id => {
          const el = document.getElementById(id);
          return el ? (el.value || "").trim() : "";
        })
        .filter(Boolean);

      const code = parts.length > 0
        ? parts.join("_")
        : "(select values above)";

      document.getElementById("taxonomyCode").textContent = code;
    }

    function cleanNumeric(val) {
      return (val || "").replace(/[^0-9.]/g, "");
    }

    function cleanInt(val) {
      return (val || "").replace(/[^0-9]/g, "");
    }

    function buildCash(thousandsAmount, suffix, upFlag, addCI) {
      if (!thousandsAmount || !suffix) return "";
      let base = thousandsAmount + suffix;
      if (upFlag) base = "UP" + base;
      if (addCI) base = base + "+CI";
      return base;
    }

    function toThousands(amountInput) {
      const numeric = parseFloat(cleanNumeric(amountInput));
      if (isNaN(numeric) || numeric <= 0) return "";
      return (numeric / 1000).toFixed(1); // 2500 -> "2.5"
    }

    function buildApr(rateInput, monthsInput) {
      const rate = cleanNumeric(rateInput);
      const months = cleanInt(monthsInput);
      if (!rate || !months) return "";
      return rate + "APR" + months;
    }

    function buildLease(leaseInput) {
      const lease = cleanInt(leaseInput);
      if (!lease) return "";
      return "L" + lease;
    }

    function buildOfferCode() {
      const template = document.getElementById("offerTemplate").value;

      const aprRate1   = document.getElementById("offerAprRate").value;
      const aprMonths1 = document.getElementById("offerAprMonths").value;
      const aprRate2   = document.getElementById("offerAprRate2").value;
      const aprMonths2 = document.getElementById("offerAprMonths2").value;

      const leaseAmt   = document.getElementById("offerLeaseAmount").value;
      const cashAmt    = document.getElementById("offerCashAmount").value;
      const cashUp     = document.getElementById("offerCashUp").checked;
      const payDays    = cleanInt(document.getElementById("offerPayDays").value);

      let code = "";

      // precomputed helpers
      const thousands = toThousands(cashAmt);
      const apr1 = buildApr(aprRate1, aprMonths1);
      const apr2 = buildApr(aprRate2, aprMonths2);
      const lease = buildLease(leaseAmt);
      const zeroApr = (cleanInt(aprMonths1) ? "0APR" + cleanInt(aprMonths1) : "");
      const payCode = payDays ? "0P" + payDays : "";

      switch (template) {
        // Cash only
        case "BC":
          code = buildCash(thousands, "BC", cashUp, false);
          break;
        case "DC":
          code = buildCash(thousands, "DC", cashUp, false);
          break;
        case "SEC":
          code = buildCash(thousands, "SEC", cashUp, false);
          break;
        case "TS":
          code = buildCash(thousands, "TS", cashUp, false);
          break;
        case "TS_CI":
          code = buildCash(thousands, "TS", cashUp, true); // TS+CI
          break;

        // APR only / 0-0
        case "APR_ONLY":
          code = apr1;
          break;
        case "ZERO_ZERO":
          // 0APRxx, months from APR1 months input
          code = zeroApr;
          break;

        // APR + Cash
        case "APR_PLUS_BC":
          code = apr1 && thousands ? (apr1 + "+" + buildCash(thousands, "BC", cashUp, false)) : "";
          break;
        case "APR_OR_BC":
          code = apr1 && thousands ? (apr1 + "|" + buildCash(thousands, "BC", cashUp, false)) : "";
          break;

        // APR + 0P variants
        case "APR_PLUS_0P":
          code = apr1 && payCode ? (apr1 + "+" + payCode) : "";
          break;
        case "APR_PLUS_0P_BC":
          code = apr1 && payCode && thousands
              ? (apr1 + "+" + payCode + "+" + buildCash(thousands, "BC", false, false))
              : "";
          break;
        case "APR_PLUS_0P_UPBC":
          code = apr1 && payCode && thousands
              ? (apr1 + "+" + payCode + "+" + buildCash(thousands, "BC", true, false))
              : "";
          break;
        case "APR_0P_OR_UPBC":
          code = apr1 && payCode && thousands
              ? (apr1 + "+" + payCode + "|" + buildCash(thousands, "BC", true, false))
              : "";
          break;

        // APR + CI / APR + BC + CI
        case "APR_PLUS_CI":
          code = apr1 ? (apr1 + "+CI") : "";
          break;
        case "APR_BC_CI":
          code = apr1 && thousands
              ? (apr1 + "+" + buildCash(thousands, "BC", false, false) + "+CI")
              : "";
          break;

        // Lease combos
        case "LEASE_ONLY":
          code = lease;
          break;
        case "LEASE_BC":
          code = lease && thousands
              ? (lease + "+" + buildCash(thousands, "BC", cashUp, false))
              : "";
          break;
        case "LEASE_EVBC":
          code = lease && thousands
              ? (lease + "+" + buildCash(thousands, "EVBC", cashUp, false))
              : "";
          break;
        case "LEASE_EVBC_CI":
          code = lease && thousands
              ? (lease + "+" + buildCash(thousands, "EVBC", cashUp, true))
              : "";
          break;
        case "SD000":
          code = "SD000";
          break;

        // APR + Lease / APR or Lease
        case "APR_PLUS_LEASE":
          code = apr1 && lease ? (apr1 + "+" + lease) : "";
          break;
        case "APR_OR_LEASE":
          code = apr1 && lease ? (apr1 + "|" + lease) : "";
          break;

        // APR vs APR / APR vs EVBC
        case "APR_OR_APR":
          code = apr1 && apr2 ? (apr1 + "|" + apr2) : "";
          break;
        case "APR_OR_EVBC":
          code = apr1 && thousands
              ? (apr1 + "|" + buildCash(thousands, "EVBC", cashUp, false))
              : "";
          break;

        default:
          code = "";
      }

      const hidden = document.getElementById("offerCode");
      const display = document.getElementById("offerCodeDisplay");
      hidden.value = code;
      display.value = code;

      updateTaxonomy();
    }

    // Attach listeners for non-offer fields
    fieldOrder.forEach(id => {
      const el = document.getElementById(id);
      if (el && id !== "offerCode") {
        el.addEventListener("change", updateTaxonomy);
      }
    });

    // Offer builder listeners
    [
      "offerTemplate",
      "offerAprRate", "offerAprMonths",
      "offerAprRate2", "offerAprMonths2",
      "offerLeaseAmount",
      "offerCashAmount",
      "offerPayDays"
    ].forEach(id => {
      const el = document.getElementById(id);
      if (el) {
        const evt = (id === "offerTemplate") ? "change" : "input";
        el.addEventListener(evt, buildOfferCode);
      }
    });

    const cashUpEl = document.getElementById("offerCashUp");
    if (cashUpEl) {
      cashUpEl.addEventListener("change", buildOfferCode);
    }

    // Initial render
    buildOfferCode();
  </script>
</body>
</html>
